<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Duck Racing ‚Äî Responsive</title>

<style>
body{
  margin:0;
  background:#0f172a;
  color:#fff;
  font-family: Inter, system-ui;
  display:flex;
  justify-content:center;
}
.container{
  width:100%;
  max-width:960px;
  padding:16px;
}
.card{
  background:#111827;
  border-radius:16px;
  padding:16px;
  box-shadow:0 10px 28px rgba(0,0,0,.45);
  margin-bottom:14px;
}
h2{text-align:center;margin-top:6px}

textarea{
  width:100%;
  min-height:90px;
  border-radius:12px;
  border:1px solid #334155;
  background:#020617;
  color:#fff;
  padding:12px;
  font-size:15px;
}
button{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-top:8px;
  font-weight:700;
  background:#22c55e;
  color:#000;
  font-size:16px;
}

.track{
  position:relative;
  margin-top:12px;
  background:#020617;
  border-radius:12px;
  border:1px solid #1e293b;
  padding:10px;
  overflow:hidden;
}
.finish{
  position:absolute;
  right:6px; top:6px; bottom:6px;
  width:3px;
  background:#ef4444;
}
.duck{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:20px;
  margin:8px 0;
  transform:translateX(0);
  transition:transform .16s linear;
}
.duck .name{font-size:14px;opacity:.85}

#board li{
  list-style:none;
  margin:6px 0;
  padding:8px;
  border-radius:10px;
  background:#020617;
}
.top1{background:#fde047;color:#000}
.top2{background:#e5e7eb;color:#000}
.top3{background:#fb923c;color:#000}

.timer{font-size:13px;opacity:.8;margin-top:6px}

/* üì± Mobile optimized */
@media(max-width:640px){
  .duck{font-size:18px}
  button{font-size:15px}
  textarea{font-size:14px}
  .track{padding:8px}
}
</style>
</head>

<body>
<div class="container">

<div class="card">
  <h2>üê§ Duck Racing ‚Äî Responsive</h2>

  <p>M·ªói d√≤ng 1 t√™n v·ªãt:</p>
  <textarea id="names"></textarea>
  <button id="startBtn">B·∫Øt ƒë·∫ßu ƒëua</button>
  <div class="timer" id="timer"></div>

  <div class="track" id="track">
    <div class="finish"></div>
  </div>

  <h3>üèÜ B·∫£ng x·∫øp h·∫°ng</h3>
  <ul id="board"></ul>
</div>

</div>

<script>
const btn = document.getElementById("startBtn");
const track = document.getElementById("track");
const board = document.getElementById("board");
const timerEl = document.getElementById("timer");

let ducks=[], finished=[], running=false, startTime=0, timerLoop=null;

function reset(){
  running=false;
  finished=[];
  board.innerHTML="";
  timerEl.textContent="";
  clearInterval(timerLoop);
}

function startRace(){
  reset();

  const names=document.getElementById("names").value
   .split("\n").map(s=>s.trim()).filter(Boolean);

  if(!names.length){alert("Nh·∫≠p t√™n v·ªãt tr∆∞·ªõc!");return;}

  track.querySelectorAll(".duck").forEach(e=>e.remove());

  ducks=names.map(n=>{
    const d=document.createElement("div");
    d.className="duck";
    d.dataset.progress=0;
    d.dataset.name=n;
    d.innerHTML=`<span>ü¶Ü</span><span class="name">${n}</span>`;
    track.appendChild(d);
    return d;
  });

  running=true;
  startTime=performance.now();

  timerLoop=setInterval(()=>{
    const t=((performance.now()-startTime)/1000).toFixed(2);
    timerEl.textContent="‚è± "+t+"s";
  },100);

  requestAnimationFrame(step);
}

function step(){
  if(!running) return;

  ducks.forEach(d=>{
    if(finished.includes(d)) return;

    let p=+d.dataset.progress;
    p+=Math.random()*3;      // t·ªëc ƒë·ªô ·ªïn ƒë·ªãnh cho mobile + pc

    if(p>=90){
      p=90;
      finished.push(d);
      const time=((performance.now()-startTime)/1000).toFixed(2);
      addRank(d.dataset.name,time);
      if(finished.length===ducks.length){
        running=false;
        clearInterval(timerLoop);
      }
    }

    d.dataset.progress=p;
    d.style.transform=`translateX(${p}%)`;
  });

  requestAnimationFrame(step);
}

function addRank(name,time){
  const li=document.createElement("li");
  const pos=finished.length;
  li.textContent = pos+". "+name+" ‚Äî "+time+"s";
  if(pos===1) li.classList.add("top1");
  if(pos===2) li.classList.add("top2");
  if(pos===3) li.classList.add("top3");
  board.appendChild(li);
}

btn.onclick=()=>{ if(!running) startRace(); };
</script>
</body>
</html>
