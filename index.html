<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Duck Race Game</title>

<style>
body{
  font-family:'Trebuchet MS',Arial;
  text-align:center;
  background:linear-gradient(160deg,#1e3c72,#2a5298);
  color:#fff;
}

.game-box{
  width:920px;
  margin:25px auto;
  background:#101522;
  border-radius:22px;
  box-shadow:0 20px 40px rgba(0,0,0,.45);
  padding:20px 25px 30px;
  border:2px solid #2c3d69;
}

h2{margin-top:5px;color:#ffd166}

textarea{
  width:340px;
  height:120px;
  border-radius:12px;
  border:2px solid #4c6fff;
  background:#0f1530;
  color:#fff;
  padding:10px;
  outline:none;
}

button{
  margin-top:12px;
  padding:10px 22px;
  font-size:16px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  background:#4c6fff;
  color:#fff;
  font-weight:600;
  box-shadow:0 6px 0 #2232a8;
}
button:active{transform:translateY(3px);box-shadow:0 3px 0 #2232a8;}

.track{
  position:relative;
  width:860px;
  margin:10px auto;
  background:linear-gradient(#26314d,#1c243d);
  border:2px dashed #6273ff;
  border-radius:18px;
  padding:16px 10px;
  overflow:hidden;
}

.finish{
  position:absolute;
  right:12px;top:10px;bottom:10px;
  width:8px;border-radius:6px;
  background:repeating-linear-gradient(
    45deg,#ff2e2e 0 8px,#ffd1d1 8px 16px);
}

/* üîπ d√πng bi·∫øn --x ƒë·ªÉ di chuy·ªÉn ngang */
.duck{
  --x: 0px;
  transform: translateX(var(--x));
  position:relative;
  display:flex;
  align-items:center;
  gap:10px;
  font-size:20px;
  padding:6px 12px;
  border-radius:14px;
  background:#0f1530;
  box-shadow:0 8px 20px rgba(0,0,0,.45);
  transition: transform .12s linear;
  animation:wiggle 1s infinite ease-in-out;
}

/* üîπ wiggle ch·ªâ l·∫Øc theo tr·ª•c Y, KH√îNG ƒë·ª•ng tr·ª•c X */
@keyframes wiggle{
  0%,100%{transform:translateX(var(--x)) translateY(0)}
  50%{transform:translateX(var(--x)) translateY(-2px)}
}

.icon{font-size:30px}

.duck.jump{animation:jump .45s ease-out forwards}
@keyframes jump{
  0%{transform:translateX(var(--x)) translateY(0) scale(1)}
  40%{transform:translateX(var(--x)) translateY(-18px) scale(1.1)}
  100%{transform:translateX(var(--x)) translateY(0) scale(1)}
}

#leaderboard{
  margin-top:18px;
  background:#0f1530;
  width:420px;
  border-radius:18px;
  padding:14px 18px;
  border:2px solid #4c6fff;
  display:none;
}
#leaderboard.show{animation:pop .35s ease-out forwards}
@keyframes pop{
  0%{transform:scale(.6);opacity:0}
  100%{transform:scale(1);opacity:1}
}
</style>
</head>

<body>
<div class="game-box">
<h2>üê• Duck Racing Game</h2>

<p>Nh·∫≠p t√™n v·ªãt (m·ªói d√≤ng m·ªôt con):</p>

<textarea id="nameInput" placeholder="V·ªãt v√†ng
V·ªãt xanh
V·ªãt h·ªìng"></textarea><br>

<button onclick="startRace()">üö¶ Start Race</button>

<div id="raceArea"></div>

<div id="leaderboard">
  <h3>üèÜ B·∫£ng x·∫øp h·∫°ng</h3>
  <ol id="rankList"></ol>
</div>
</div>

<script>
const colors=["#ffb703","#06d6a0","#9b5de5","#ef476f","#ffd166","#4cc9f0"];

let results=[],totalDucks=0;

function startRace(){
  const area=document.getElementById("raceArea");
  const board=document.getElementById("leaderboard");
  const list=document.getElementById("rankList");

  area.innerHTML="";
  board.style.display="none";
  list.innerHTML="";
  results=[];

  const names=document.getElementById("nameInput")
    .value.split("\n").map(x=>x.trim()).filter(x=>x);

  if(!names.length){alert("H√£y nh·∫≠p t√™n v·ªãt!");return;}

  totalDucks=names.length;

  names.forEach((name,i)=>{
    const track=document.createElement("div");
    track.className="track";

    const duck=document.createElement("div");
    duck.className="duck";

    const icon=document.createElement("span");
    icon.className="icon";
    icon.textContent="ü¶Ü";
    icon.style.filter=`drop-shadow(0 0 10px ${colors[i%colors.length]})`;

    const label=document.createElement("span");
    label.textContent=name;

    duck.append(icon,label);

    const finish=document.createElement("div");
    finish.className="finish";

    track.append(duck,finish);
    area.append(track);

    animateDuck(duck,name);
  });
}

function animateDuck(duck,name){
  let pos=0,max=760,base=1+Math.random()*0.7;

  const timer=setInterval(()=>{
    pos += (Math.random()*3+1.4)*base;
    if(pos>max) pos=max;

    duck.style.setProperty("--x",pos+"px");

    if(pos>=max){
      clearInterval(timer);
      duck.classList.add("jump");
      finishDuck(name);
    }
  },120);
}

function finishDuck(name){
  results.push(name);
  if(results.length===totalDucks) showLeaderboard();
}

function showLeaderboard(){
  const board=document.getElementById("leaderboard");
  const list=document.getElementById("rankList");

  results.forEach((name,i)=>{
    const li=document.createElement("li");
    li.textContent=(i+1)+". "+name;
    list.append(li);
  });

  board.style.display="inline-block";
  board.classList.add("show");
}
</script>
</body>
</html>
